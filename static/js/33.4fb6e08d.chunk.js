(this.webpackJsonpreactjs=this.webpackJsonpreactjs||[]).push([[33],{455:function(e,t,n){e.exports=n.p+"static/media/abp-logo-long.348dee44.png"},561:function(e,t,n){e.exports=n.p+"static/media/microsoft.0502e763.svg"},601:function(e,t,n){},727:function(e,t,n){"use strict";n.r(t);n(454);var a,o,r=n(456),c=n.n(r),s=(n(320),n(321)),i=n.n(s),l=(n(162),n(110)),u=n.n(l),p=(n(383),n(385)),m=n.n(p),d=(n(355),n(356)),g=n.n(d),h=n(2),f=n.n(h),b=n(4),v=n(7),x=n(13),w=n(102),y=n(101),S=(n(601),n(1)),E=n(68),k=n(455),A=n.n(k),j=n(561),O=n.n(j),N=n(34),T=n(16),P=n(115),R=n(120),z={scopes:["openid","User.Read"],state:"12345",prompt:"select_account"},I={scopes:["openid","User.Read"]},_=Object(E.b)(P.a.AuthenticationStore,P.a.SessionStore,P.a.AccountStore)(a=Object(E.c)(a=function(e){Object(w.a)(n,e);var t=Object(y.a)(n);function n(){var e;Object(v.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={loading:!1,loading1:!1},e.handleSubmit=function(){var t=Object(b.a)(f.a.mark((function t(n){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.next=3,e.props.form.validateFields(function(){var t=Object(b.a)(f.a.mark((function t(n,a){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=4;break}return e.setState({loading:!0}),t.next=4,e.props.authenticationStore.login(a).then(function(){var t=Object(b.a)(f.a.mark((function t(n){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loading:!1}),console.log("login request",a),console.log("login response",n),t.t0=console,t.next=6,abp.session;case 6:t.t1=t.sent,t.t0.log.call(t.t0,"abp session value after login",t.t1),console.log(e.props.location),console.log("href",window.location.href),window.location.href="/holiday";case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.setState({loading:!1})}));case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}());case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.azureSignIn=function(){e.setState({loading1:!0}),R.a.loginPopup(z).then((function(t){return e.handleResponse(t)})).catch((function(t){console.error(t),e.setState({loading1:!1})}))},e.handleResponse=function(){var t=Object(b.a)(f.a.mark((function t(n){var a,o;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:null!==n?(console.log(n),o=n.account.userName,R.a.acquireTokenPopup(I).then((function(e){console.log(e),console.log("access_token",e.accessToken),localStorage.setItem("azureToken",e.accessToken),localStorage.setItem("expiresOn",e.expiresOn.toString()),console.log("username",e.account.userName),a={userNameOrEmailAddress:o,password:e.accessToken,useAzureAD:!0}})).then(function(){var t=Object(b.a)(f.a.mark((function t(n){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.authenticationStore.login(a);case 2:e.setState({loading1:!1}),window.location.href="/holiday";case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){console.error(t),e.setState({loading1:!1})})),console.log(o)):e.selectAccount();case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.selectAccount=function(){var e=R.a.getAllAccounts();null!==e&&(e.length>1?console.warn("Multiple accounts detected."):1===e.length&&(o=e[0],console.log(o)))},e}return Object(x.a)(n,[{key:"render",value:function(){console.log("Login Page : abp session value after login",abp.session);var e=(this.props.location.state||{from:{pathname:"/"}}).from;return console.log("Authentication Store",this.props.authenticationStore),console.log("Authenticated status",this.props.authenticationStore.isAuthenticated),this.props.authenticationStore.isAuthenticated?S.createElement(T.a,{to:e}):S.createElement("div",{className:"d-md-flex h-md-100 align-items-center"},S.createElement("div",{className:"col-md-6 p-0 bg-indigo h-md-100 login-box"},S.createElement("div",{className:"text-white d-md-flex align-items-center h-100 text-center justify-content-center"},S.createElement("div",{className:"container-fluid",style:{backgroundColor:"#111d2c",height:"100vh"}}))),S.createElement("div",{className:"col-md-6 p-0 bg-white h-md-100 loginarea"},S.createElement("div",{className:"d-md-flex align-items-center h-md-100 justify-content-center"},S.createElement(c.a,{className:"",onSubmit:this.handleSubmit},S.createElement(m.a,{style:{marginTop:10}},S.createElement(g.a,null,S.createElement("img",{src:A.a,alt:"arcelor logo",className:"mx-auto d-block",style:{width:"60%",marginLeft:"30px"}}))),S.createElement(m.a,{style:{marginTop:10,textAlign:"center"}},S.createElement(g.a,null,S.createElement(i.a,null,S.createElement("div",{style:{textAlign:"center"}},S.createElement("h3",null,Object(N.a)("Holiday Approval System"))),S.createElement(u.a,{loading:this.state.loading1,onClick:this.azureSignIn,style:{color:"white",marginTop:"50px",width:"165px"},type:"primary"},S.createElement("img",{src:O.a,style:{width:"14px",marginRight:"5px"}}),"Login"),S.createElement("div",{style:{marginTop:"50px"}},S.createElement("small",{className:"text-muted"},"Popup blockers interfere with the operation of this application.Please disable your popup blocker."))))))),S.createElement(m.a,{className:"footnote"},"Powered by"," ",S.createElement("a",{target:"_blank",rel:"noopener noreferrer",className:"text-danger",href:"https://untanglestrategy.com/"},"Untangle_"))))}}]),n}(S.Component))||a)||a;t.default=c.a.create()(_)}}]);