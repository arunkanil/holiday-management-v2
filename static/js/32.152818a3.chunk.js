(this.webpackJsonpreactjs=this.webpackJsonpreactjs||[]).push([[32],{641:function(e,t,n){e.exports=n.p+"static/media/abp-logo-long.348dee44.png"},673:function(e,t,n){},674:function(e,t,n){e.exports=n.p+"static/media/microsoft.0502e763.svg"},747:function(e,t,n){"use strict";n.r(t);n(325);var a,r,o=n(326),s=n.n(o),c=(n(391),n(399)),l=n.n(c),i=(n(362),n(61)),u=n.n(i),p=(n(671),n(686)),m=n.n(p),d=(n(163),n(111)),g=n.n(d),h=(n(409),n(410)),f=n.n(h),b=(n(371),n(372)),w=n.n(b),E=n(2),y=n.n(E),x=n(4),v=n(7),S=n(13),A=n(102),k=n(101),O=(n(430),n(432)),j=n.n(O),N=(n(673),n(1)),T=n(69),q=n(641),z=n.n(q),I=n(674),P=n.n(I),R=n(38),C=n(16),D=n(117),F={userNameOrEmailAddress:[{required:!0,message:Object(R.a)("ThisFieldIsRequired")}],password:[{required:!0,message:Object(R.a)("ThisFieldIsRequired")}],useAzureAD:[{required:!1}]},L=n(126),U=j.a.Item,_={scopes:["openid","User.Read"],state:"12345",prompt:"select_account"},J={scopes:["openid","User.Read"]},H=Object(T.b)(D.a.AuthenticationStore,D.a.SessionStore,D.a.AccountStore)(a=Object(T.c)(a=function(e){Object(A.a)(n,e);var t=Object(k.a)(n);function n(){var e;Object(v.a)(this,n);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).state={loading:!1,loading1:!1},e.handleSubmit=function(){var t=Object(x.a)(y.a.mark((function t(n){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.next=3,e.props.form.validateFields(function(){var t=Object(x.a)(y.a.mark((function t(n,a){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=4;break}return e.setState({loading:!0}),t.next=4,e.props.authenticationStore.login(a).then(function(){var t=Object(x.a)(y.a.mark((function t(n){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loading:!1}),console.log("login request",a),console.log("login response",n),t.t0=console,t.next=6,abp.session;case 6:t.t1=t.sent,t.t0.log.call(t.t0,"abp session value after login",t.t1),console.log(e.props.location),console.log("href",window.location.href),window.location.href="/holiday";case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.setState({loading:!1})}));case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}());case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.azureSignIn=function(){e.setState({loading1:!0}),L.a.loginPopup(_).then((function(t){return e.handleResponse(t)})).catch((function(t){console.error(t),e.setState({loading1:!1})}))},e.handleResponse=function(){var t=Object(x.a)(y.a.mark((function t(n){var a,r;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:null!==n?(console.log(n),r=n.account.userName,L.a.acquireTokenPopup(J).then((function(e){console.log(e),console.log("access_token",e.accessToken),localStorage.setItem("azureToken",e.accessToken),localStorage.setItem("expiresOn",e.expiresOn.toString()),console.log("username",e.account.userName),a={userNameOrEmailAddress:r,password:e.accessToken,useAzureAD:!0}})).then(function(){var t=Object(x.a)(y.a.mark((function t(n){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.authenticationStore.login(a);case 2:e.setState({loading1:!1}),window.location.href="/holiday";case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){console.error(t),e.setState({loading1:!1})})),console.log(r)):e.selectAccount();case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.selectAccount=function(){var e=L.a.getAllAccounts();null!==e&&(e.length>1?console.warn("Multiple accounts detected."):1===e.length&&(r=e[0],console.log(r)))},e}return Object(S.a)(n,[{key:"render",value:function(){console.log("Login Page : abp session value after login",abp.session);var e=(this.props.location.state||{from:{pathname:"/"}}).from;if(console.log("Authentication Store",this.props.authenticationStore),console.log("Authenticated status",this.props.authenticationStore.isAuthenticated),this.props.authenticationStore.isAuthenticated)return N.createElement(C.a,{to:e});var t=this.props.form.getFieldDecorator;return N.createElement("div",{className:"d-md-flex h-md-100 align-items-center"},N.createElement("div",{className:"col-md-6 p-0 bg-indigo h-md-100 login-box"},N.createElement("div",{className:"text-white d-md-flex align-items-center h-100 text-center justify-content-center"},N.createElement("div",{className:"container-fluid",style:{backgroundColor:"#111d2c",height:"100vh"}}))),N.createElement("div",{className:"col-md-6 p-0 bg-white h-md-100 loginarea"},N.createElement("div",{className:"d-md-flex align-items-center h-md-100 justify-content-center"},N.createElement(j.a,{className:"",onSubmit:this.handleSubmit},N.createElement(f.a,null,N.createElement(f.a,{style:{marginTop:10}},N.createElement(w.a,null,N.createElement("img",{src:z.a,alt:"arcelor logo",className:"mx-auto d-block",style:{width:"60%",marginLeft:"30px"}}))),N.createElement(f.a,{style:{marginTop:10,textAlign:"center"}},N.createElement(w.a,null,N.createElement(s.a,null,N.createElement("div",{style:{textAlign:"center"}},N.createElement("h3",null,Object(R.a)("Holiday Approval System"))),N.createElement(g.a,{loading:this.state.loading1,onClick:this.azureSignIn,style:{color:"white",marginTop:"50px",width:"165px"},type:"primary"},N.createElement("img",{src:P.a,style:{width:"14px",marginRight:"5px"}}),"Login"),N.createElement("div",null,N.createElement("small",{className:"text-muted"},"Popup blockers interfere with the operation of this application.Please disable your popup blocker.")),N.createElement(m.a,null,"Or"),N.createElement(U,null,t("userNameOrEmailAddress",{rules:F.userNameOrEmailAddress})(N.createElement(l.a,{placeholder:"Username or Email",style:{width:"250px"},prefix:N.createElement(u.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),size:"large"}))),N.createElement(U,null,t("password",{rules:F.password})(N.createElement(l.a,{placeholder:Object(R.a)("Password"),style:{width:"250px"},prefix:N.createElement(u.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",size:"large"}))),N.createElement(f.a,{style:{textAlign:"center"}},N.createElement(w.a,null,N.createElement(g.a,{loading:this.state.loading,style:{backgroundColor:"#f5222d",color:"white",width:"165px"},htmlType:"submit",type:"danger"},"Login as SuperAdmin"))))))))),N.createElement(f.a,{className:"footnote"},"Powered by"," ",N.createElement("a",{target:"_blank",rel:"noopener noreferrer",className:"text-danger",href:"https://untanglestrategy.com/"},"Untangle_"))))}}]),n}(N.Component))||a)||a;t.default=j.a.create()(H)}}]);